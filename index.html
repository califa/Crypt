<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Crypt Demo</title>
    <link rel="stylesheet" href="css/custom-theme/ui.css" type="text/css"> <!-- We need this for some reason for the resizing to work -->

    <link href='http://fonts.googleapis.com/css?family=Exo:100,200,300,400,500,600,700,800,900,900italic,800italic,700italic,400italic,500italic,600italic,100italic,200italic,300italic' rel='stylesheet' type='text/css'> 

    <link href="css/crypt.css" rel="stylesheet" type="text/css">
    <style>
      #dropBox {
        position:absolute;
        top: 400px;
        left:1000px;
        width: 100px;
        height: 100px;
        background-color: black;
        color: white;
        text-align: center;
        padding: 30px 0;
      }
    </style>
  </head>
  <body>

<!--<div class="window connector disconnected" id="connector">
      <div class="handle">
        <button class="close"></button>
        <button class="minimize"></button>
        <span class="title">CONNECTOR</span>
      </div>

      <div class="content">
        <div class="contentinner clearfix">
          
          <div class="map"></div>
          
          <div class="route clearix">
            <div class="bounces">
              <div class="server you">You</div>
              <div class="arrow">&#x21e2;</div>
              <div class="server fav">123.123.123.123</div>
              <div class="arrow">&#x21e2;</div>
              <div class="server">123.123.123.123</div>
              <div class="arrow">&#x21e2;</div>
              <div class="server fav">123.123.123.123</div>
              <div class="arrow">&#x21e2;</div>
              <div class="server destServer">123.123.123.123</div>
            </div>
          </div>
          <button class="connect">CONNECT</button>

          <div class="browser">
            <div class="login">
              <h3 class="servertitle">Server Title</h3>
              <input type="text" title="USERNAME" class="username"><br />
              <input type="password" title="PASSWORD" class="password"><br/>
              <button class="login">Log In</button>
            </div>
          </div>

        </div>
       </div>
  </div>--> 

 <!-- <div class="window hello disconnected" id="hello">
      <div class="handle">
        <button class="close"></button>
        <button class="minimize"></button>
        <span class="title">HELLO</span>
      </div>

      <div class="content">
        <div class="contentinner clearfix">
          <!--inside stuff ->
        </div>
       </div>
  </div> -->
  <div class="window disconnected" id="file_browser">
      <div class="handle">
        <button class="close"></button>
        <button class="minimize"></button>
        <span class="title">File Browser</span>
      </div>

      <div class="content">
        <div class="contentinner clearfix">
          <ul id="file_list">
            <li draggable="true" class="file">data3428234_1_1.txt</li>
            <li draggable="true" class="file">data3428234_1_2.txt</li>
            <li draggable="true" class="file">data3428234_1_3.txt</li>
            <li draggable="true" class="file">data3428234_1_4.txt</li>
            <li draggable="true" class="file">data3428234_1_5.txt</li>
            <li draggable="true" class="file">data3428234_1_6.txt</li>
            <li draggable="true" class="file">data3428234_1_7.txt</li>
            <li draggable="true" class="file">data3428234_1_8.txt</li>
            <li draggable="true" class="file">data3428234_1_9.txt</li>
            <li draggable="true" class="file">data3428234_1_0.txt</li>
          </ul>
          <!--inside stuff -->
        </div>
       </div>
  </div> 

    <div class="window disconnected" id="file_browser2">
      <div class="handle">
        <button class="close"></button>
        <button class="minimize"></button>
        <span class="title">File Browser</span>
      </div>

      <div class="content">
        <div class="contentinner clearfix">
          <ul id="file_list2">
            <li draggable="true" class="file">data3428234_2_1.txt</li>
            <li draggable="true" class="file">data3428234_2_2.txt</li>
            <li draggable="true" class="file">data3428234_2_3.txt</li>
            <li draggable="true" class="file">data3428234_2_4.txt</li>
            <li draggable="true" class="file">data3428234_2_5.txt</li>
            <li draggable="true" class="file">data3428234_2_6.txt</li>

          </ul>
          <!--inside stuff -->
        </div>
       </div>
  </div> 
  <div class="window disconnected" id="cracker">
      <div class="handle">
        <button class="close"></button>
        <button class="minimize"></button>
        <span class="title">Password cracker</span>
      </div>

      <div class="content">
        <div class="contentinner clearfix">
          <!--inside stuff -->
          <p>drag lock to password field</p>
          <img draggable="true" id="lock" src="img/lock.png"/>
        </div>
       </div>
  </div>
  <div id="dropBox"></div>
  
  
    <div class="dock clearfix">
      <ul class="clearfix">
        <li class="main">
            <div class="tooltip">Main</div>
          <img src="img/icon0.png" /></li>
        <li>
          <div class="tooltip">Connector</div>
          <img class="connectoricon" src="img/icon1.png" /></li>
        <li>
          <div class="tooltip">Weed</div>
          <img src="img/icon2.png" /></li>
        <li>
          <div class="tooltip">Flower</div>
          <img src="img/icon3.png" /></li>
        <li>
          <div class="tooltip">Clover</div>
          <img src="img/icon4.png" /></li>
        <li>
          <div class="tooltip">Hand</div>
          <img src="img/icon5.png" /></li>
        <li>
          <div class="tooltip">Foot Clan</div>
          <img src="img/icon6.png" /></li>
        <li>
          <div class="tooltip">Search</div>
          <img src="img/icon7.png" /></li>
        <li>
          <div class="tooltip">Puzzle</div>
          <img src="img/icon8.png" /></li>
        <li>
          <div class="tooltip">Umbrella</div>
          <img src="img/icon9.png" /></li>
      </ul>
  </div>

    <!-- jQuery, UI + box-shadow animations -->
    <script src="js/jquery-1.7.1.min.js"></script>
    <script src="js/jquery-ui-1.8.17.custom.min.js"></script>
    <script src="js/jquery.animate-shadow-min.js"></script>

    <script type=text/javascript src="js/crypt.js"></script>
    <script>
        
       //************* Peter's SHIT ********************//

        var dragSrcEl = null;
        var dragIcon = document.createElement('img');
        dragIcon.src = 'img/file.png';
        var lockIcon = document.createElement('img');
        lockIcon.src = 'img/lock.png'
        function handleDragStart(e) {
          this.style.opacity = '0.4'; 

          dragSrcEl = this;

          e.dataTransfer.effecAllowed = "move";
          e.dataTransfer.setData('text/html', this.innerHTML);

         // e.dataTransfer.setDragImage(dragIcon, 7, 10);
        }
        function handleDragOver(e) {
          if (e.preventDefault) {
            e.preventDefault(); 
          }

          e.dataTransfer.dropEffect = 'move'; 
          console.log('drag over');
          return false;
        }

        function handleDragEnter(e) {
          this.style.opacity = '0.4';
          this.classList.add('over');
          console.log('drag enter');
        }

        function handleDragLeave(e) {
          this.style.opacity = '1';
          this.classList.remove('over'); 
          console.log('drag leave');
        }
        function handleDrop(e) {
          this.style.opacity = '1';

          if(dragSrcEl != this) {
            dragSrcEl.innerHTML = this.innerHTML;
            this.innerHTML = e.dataTransfer.getData('text/html');
          }

          if (e.stopPropagation) {
            e.stopPropagation(); 
          }
          console.log('drag drop');

          return false;
        }

        function handleDragEnd(e) {
          this.style.opacity = '1';  

          console.log('drag end');
        }

        function lockDragStart(e) {
          this.style.opacity = '0.4';
          e.dataTransfer.setDragImage(lockIcon, 10, 10);
        }
        function lockDragOver(e) {
          if (e.preventDefault) {
            e.preventDefault(); 
          } 
          console.log('dragging over');
          return false;
        }
        function lockDragEnter(e) {
          console.log('dragEntered');
        }
        function lockDragLeave(e) {

        }

        function lockDrop(e) {
          this.style.opacity = '1';

          console.log('dropped');
          this.innerHTML = '<p>Cracked</p>';
          if (e.stopPropagation) {
            e.stopPropagation(); 
          }
          return false;
        }

        function lockDragEnd(e) {
          this.style.opacity = '1';
        }

      $(function() {
        $("#file_list").children('li:odd').css('background-color','#2a362e');
        $("#file_list").children('li:even').css('background-color','#232d26');
        $("#file_list2").children('li:odd').css('background-color','#2a362e');
        $("#file_list2").children('li:even').css('background-color','#232d26');
        /*$('#file_list').sortable({
          update:function(event,ui){
            $("#file_list").children('li:odd').css('background-color','#2a362e');
            $("#file_list").children('li:even').css('background-color','#232d26');
          }
        });*/

        var files = document.querySelectorAll('#file_list .file');
        [].forEach.call(files, function(file) {
          file.addEventListener('dragstart', handleDragStart, false);
          file.addEventListener('dragenter', handleDragEnter, false);
          file.addEventListener('dragover', handleDragOver, false);
          file.addEventListener('dragleave', handleDragLeave, false);
          file.addEventListener('drop', handleDrop, false);
          file.addEventListener('dragend', handleDragEnd, false);
        });

        var files2 = document.querySelectorAll('#file_list2 .file');
        [].forEach.call(files2, function(file) {
          file.addEventListener('dragstart', handleDragStart, false);
          file.addEventListener('dragenter', handleDragEnter, false);
          file.addEventListener('dragover', handleDragOver, false);
          file.addEventListener('dragleave', handleDragLeave, false);
          file.addEventListener('drop', handleDrop, false);
          file.addEventListener('dragend', handleDragEnd, false);
        });

        var lock = document.querySelector('#lock');
        var dropBox = document.querySelector('#dropBox');
        lock.addEventListener('dragstart', lockDragStart, false);
        lock.addEventListener('dragend', lockDragEnd, false);
        dropBox.addEventListener('dragover', lockDragOver, false);
        dropBox.addEventListener('dragenter', lockDragEnter,false);
        dropBox.addEventListener('drop', lockDrop, false);

      });
       //************* Peter's SHIT ********************//



    </script>
  </body>
</html>